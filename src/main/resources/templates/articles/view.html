<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Chi ti·∫øt B√†i vi·∫øt</title>
    <meta charset="UTF-8"/>
    <style>
        /* Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Arial", sans-serif;
        }

        body {
            background: #f4f7fb;
            color: #2c3e50;
        }

        /* Header */
        .header-container {
            background: #1f2d3d;
            padding: 10px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo img {
            height: 70px;
            width: auto;
        }
        .navbar {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        .navbar a {
            color: #d1d8e0;
            text-decoration: none;
            font-size: 15px;
            padding: 6px 10px;
            border-radius: 4px;
            transition: 0.2s;
        }
        .navbar a:hover {
            background: #34495e;
            color: #00c9a7;
        }
        .dropdown {
            position: relative;
        }
        .dropbtn {
            background: none;
            border: none;
            color: #d1d8e0;
            font-size: 15px;
            cursor: pointer;
            padding: 8px 14px;
            border-radius: 6px;
        }
        .dropbtn:hover {
            background: #34495e;
            color: #00c9a7;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            top: 110%;
            right: 0;
            background: #fff;
            min-width: 160px;
            border-radius: 6px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            z-index: 1000;
        }
        .dropdown-content a {
            color: #2c3e50;
            padding: 10px 14px;
            text-decoration: none;
            display: block;
            font-size: 14px;
        }
        .dropdown-content a:hover {
            background: #ecf0f1;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .user-menu img {
            height: 42px;
            width: 42px;
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
            object-fit: cover;
        }

        /* Container */
        .container {
            max-width: 900px;
            margin: 40px auto;
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 26px;
            margin-bottom: 15px;
            text-align: center;
            color: #34495e;

            word-wrap: break-word;      /* T·ª± ƒë·ªông xu·ªëng d√≤ng khi g·∫∑p t·ª´ qu√° d√†i */
            overflow-wrap: break-word;  /* Chu·∫©n hi·ªán ƒë·∫°i */
            white-space: pre-line;
        }
        .meta {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 20px;
            text-align: center;
        }
        .content {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #2c3e50;

            /* Fix overflow text */
            word-wrap: break-word;      /* T·ª± ƒë·ªông xu·ªëng d√≤ng khi g·∫∑p t·ª´ qu√° d√†i */
            overflow-wrap: break-word;  /* Chu·∫©n hi·ªán ƒë·∫°i */
            white-space: pre-line;      /* Gi·ªØ xu·ªëng d√≤ng nh∆∞ng kh√¥ng cho d√≠nh li·ªÅn m·ªôt d√≤ng */
        }


        /* Action buttons */
        .actions {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
        }
        .actions a {
            padding: 10px 14px;
            text-decoration: none;
            font-size: 14px;
            border-radius: 6px;
            transition: 0.2s;
            font-weight: bold;
        }
        .bookmark-btn {
            background: #9b59b6;
            color: white;
        }
        .bookmark-btn:hover { background: #7e3794; }
        .back-btn {
            background: #3498db;
            color: white;
        }
        .back-btn:hover { background: #217dbb; }

        /* Review section */
        h2 {
            margin-top: 40px;
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .add-review {
            display: inline-block;
            margin-bottom: 15px;
            padding: 8px 14px;
            background: #2ecc71;
            color: white;
            text-decoration: none;
            font-size: 14px;
            border-radius: 6px;
            transition: 0.2s;
        }
        .add-review:hover {
            background: #27ae60;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            font-size: 14px;
        }
        th {
            background: #1f2d3d;
            color: #fff;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        tr:hover {
            background: #f1f1f1;
        }
        td a {
            text-decoration: none;
            font-size: 13px;
            margin: 0 4px;
        }
        td a:hover {
            text-decoration: underline;
        }
        .edit-link { color: #f39c12; font-weight: bold; }
        .delete-link { color: #e74c3c; font-weight: bold; }

        .sort-buttons {
            display: flex;
            gap: 10px;
        }

        .sort-btn {
            background: #00b894;
            color: white;
            padding: 8px 14px;
            text-decoration: none;
            font-size: 13px;
            border-radius: 6px;
            transition: 0.2s;
        }

        .sort-btn:hover {
            background: #019870;
        }

    </style>
</head>
<body>
<header>
    <div class="header-container">
        <!-- Logo -->
        <div class="logo">
            <img src="/images/dev_log2.png" alt="Logo">
        </div>

        <!-- Navbar -->
        <nav class="navbar">
            <div class="dropdown">
                <button class="dropbtn">üìö Ph√¢n lo·∫°i 1</button>
                <div class="dropdown-content">
                    <a href="#">Frontend</a>
                    <a href="#">Backend</a>
                    <a href="#">Database</a>
                </div>
            </div>
            <div class="dropdown">
                <button class="dropbtn">üõ† Ph√¢n lo·∫°i 2</button>
                <div class="dropdown-content">
                    <a href="#">Beginner</a>
                    <a href="#">Intermediate</a>
                    <a href="#">Advanced</a>
                </div>
            </div>
        </nav>

        <!-- User -->
        <div class="user-menu">
            <a href="/account"><img src="/images/user.png" alt="T√†i kho·∫£n"></a>
        </div>
    </div>
</header>

<div class="container">
    <h1 th:text="${article.title}"></h1>
    <div class="meta">
        ‚úçÔ∏è <span th:text="${article.author}"></span> | üíª <span th:text="${article.language}"></span>
    </div>
    <div class="content" th:text="${article.content}"></div>
    <img th:if="${article.image != null}"
         th:src="'data:image/jpeg;base64,' + ${article.base64Image}"
         alt="·∫¢nh b√†i vi·∫øt"
         style="max-width: 400px; margin-bottom: 15px; border-radius: 12px;">


    <div class="actions">
        <a class="bookmark-btn" th:href="@{/articles/bookmark/{id}(id=${article.id})}">üìë Bookmark</a>
        <a class="back-btn" th:href="@{/articles}">‚¨Ö Quay l·∫°i danh s√°ch</a>
    </div>


    <hr>

    <h2>ƒê√°nh gi√° kh√≥a h·ªçc / Review</h2>
    <a class="add-review" th:href="@{/reviews/new/{articleId}(articleId=${article.id})}">‚ûï Th√™m Review</a>

    <!-- N√∫t s·∫Øp x·∫øp -->
    <div class="sort-buttons">
        <a th:href="@{/articles/{id}(id=${article.id}, sort='asc')}"
           class="sort-btn">‚¨áÔ∏è S·∫Øp x·∫øp tƒÉng d·∫ßn (1‚≠ê ‚Üí 5‚≠ê)</a>
        <a th:href="@{/articles/{id}(id=${article.id}, sort='desc')}"
           class="sort-btn">‚¨ÜÔ∏è S·∫Øp x·∫øp gi·∫£m d·∫ßn (5‚≠ê ‚Üí 1‚≠ê)</a>
    </div>

    <table>
        <tr>
            <th>ID</th>
            <th>Ng∆∞·ªùi d√πng</th>
            <th>S·ªë sao</th>
            <th>N·ªôi dung</th>
            <th>H√†nh ƒë·ªông</th>
        </tr>
        <tr th:each="review : ${reviews}">
            <td th:text="${review.id}"></td>
            <td th:text="${review.reviewerName}"></td>
            <td th:text="${review.rating} + ' ‚≠ê'"></td>
            <td th:text="${review.comment}"></td>
            <td>
                <a class="edit-link" th:href="@{/reviews/edit/{id}(id=${review.id})}">‚úèÔ∏è S·ª≠a</a> |
                <a class="delete-link" th:href="@{/reviews/delete/{id}(id=${review.id}, articleId=${article.id})}"
                   onclick="return confirm('X√≥a review n√†y?')">üóëÔ∏è X√≥a</a>
            </td>
        </tr>
    </table>



</div>

</body>
</html>
